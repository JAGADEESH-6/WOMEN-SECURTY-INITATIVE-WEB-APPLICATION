<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>help</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/help.css') }}">
</head>

<body>
    <div class="sidebar">
        <img src="../static/images/logo.png" />
        <div class="sildebar-menu">
            <a href="./home" class=" ">
                <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="none">
                    <path
                        d="M8.49996 26.9167H12.75V18.4167H21.25V26.9167H25.5V14.1667L17 7.79167L8.49996 14.1667V26.9167ZM5.66663 29.75V12.75L17 4.25L28.3333 12.75V29.75H18.4166V21.25H15.5833V29.75H5.66663Z"
                        fill="#263238" fill-opacity="0.75" />
                </svg>

            </a>
           <a href="./dashboard"> 
            <svg
            xmlns="http://www.w3.org/2000/svg"
            width="34"
            height="34"
            fill="none"
          >
            <path
              d="M18.4167 12.75V4.25H29.75V12.75H18.4167ZM4.25 18.4167V4.25H15.5833V18.4167H4.25ZM18.4167 29.75V15.5833H29.75V29.75H18.4167ZM4.25 29.75V21.25H15.5833V29.75H4.25ZM7.08333 15.5833H12.75V7.08333H7.08333V15.5833ZM21.25 26.9167H26.9167V18.4167H21.25V26.9167ZM21.25 9.91667H26.9167V7.08333H21.25V9.91667ZM7.08333 26.9167H12.75V24.0833H7.08333V26.9167Z"
              fill="black"
              fill-opacity="0.75"
            />
          </svg>
            </a>
          <!-- <a href="./map_1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="34"
              height="34"
              fill="none"
            >
              <path
                d="M21.25 29.75L12.75 26.775L6.1625 29.325C5.69028 29.5139 5.25347 29.4605 4.85208 29.1649C4.45069 28.8693 4.25 28.4741 4.25 27.9792V8.14583C4.25 7.83889 4.33878 7.56736 4.51633 7.33125C4.69389 7.09514 4.93567 6.91806 5.24167 6.8L12.75 4.25L21.25 7.225L27.8375 4.675C28.3097 4.48611 28.7465 4.53947 29.1479 4.83508C29.5493 5.13069 29.75 5.52594 29.75 6.02083V25.8542C29.75 26.1611 29.6612 26.4326 29.4837 26.6688C29.3061 26.9049 29.0643 27.0819 28.7583 27.2L21.25 29.75ZM19.8333 26.2792V9.70417L14.1667 7.72083V24.2958L19.8333 26.2792ZM22.6667 26.2792L26.9167 24.8625V8.075L22.6667 9.70417V26.2792ZM7.08333 25.925L11.3333 24.2958V7.72083L7.08333 9.1375V25.925Z"
                fill="black"
                fill-opacity="0.75"
              />
            </svg>
          </a> -->
           
            <a href="./map_2">
                <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="none">
                    <path
                        d="M17.4271 26.25C17.9375 26.25 18.3692 26.0735 18.7221 25.7206C19.075 25.3677 19.251 24.9365 19.25 24.4271C19.25 23.9167 19.074 23.485 18.7221 23.1321C18.3701 22.7792 17.9385 22.6032 17.4271 22.6042C16.9167 22.6042 16.4855 22.7806 16.1335 23.1335C15.7816 23.4865 15.6051 23.9176 15.6042 24.4271C15.6042 24.9375 15.7806 25.3692 16.1335 25.7221C16.4865 26.075 16.9176 26.251 17.4271 26.25ZM16.1146 20.6354H18.8125C18.8125 19.8333 18.9039 19.2014 19.0867 18.7396C19.2694 18.2778 19.7857 17.6458 20.6354 16.8437C21.2674 16.2118 21.7656 15.61 22.1302 15.0383C22.4948 14.4667 22.6771 13.7803 22.6771 12.9792C22.6771 11.6181 22.1788 10.5729 21.1823 9.84375C20.1858 9.11458 19.0069 8.75 17.6458 8.75C16.2604 8.75 15.136 9.11458 14.2727 9.84375C13.4094 10.5729 12.8081 11.4479 12.4687 12.4687L14.875 13.4167C14.9965 12.9792 15.2702 12.5052 15.696 11.9948C16.1219 11.4844 16.7718 11.2292 17.6458 11.2292C18.4236 11.2292 19.0069 11.4421 19.3958 11.8679C19.7847 12.2937 19.9792 12.7614 19.9792 13.2708C19.9792 13.7569 19.8333 14.2129 19.5417 14.6387C19.25 15.0646 18.8854 15.4593 18.4479 15.8229C17.3785 16.7708 16.7222 17.4878 16.4792 17.974C16.2361 18.4601 16.1146 19.3472 16.1146 20.6354ZM17.5 32.0833C15.4826 32.0833 13.5868 31.7003 11.8125 30.9342C10.0382 30.1681 8.49479 29.1292 7.18229 27.8177C5.86979 26.5052 4.83097 24.9618 4.06583 23.1875C3.30069 21.4132 2.91764 19.5174 2.91666 17.5C2.91666 15.4826 3.29972 13.5868 4.06583 11.8125C4.83194 10.0382 5.87076 8.49479 7.18229 7.18229C8.49479 5.86979 10.0382 4.83097 11.8125 4.06583C13.5868 3.30069 15.4826 2.91764 17.5 2.91666C19.5174 2.91666 21.4132 3.29972 23.1875 4.06583C24.9618 4.83194 26.5052 5.87076 27.8177 7.18229C29.1302 8.49479 30.1695 10.0382 30.9356 11.8125C31.7017 13.5868 32.0843 15.4826 32.0833 17.5C32.0833 19.5174 31.7003 21.4132 30.9342 23.1875C30.1681 24.9618 29.1292 26.5052 27.8177 27.8177C26.5052 29.1302 24.9618 30.1695 23.1875 30.9356C21.4132 31.7017 19.5174 32.0843 17.5 32.0833ZM17.5 29.1667C20.7569 29.1667 23.5156 28.0365 25.776 25.776C28.0365 23.5156 29.1667 20.7569 29.1667 17.5C29.1667 14.2431 28.0365 11.4844 25.776 9.22396C23.5156 6.96354 20.7569 5.83333 17.5 5.83333C14.2431 5.83333 11.4844 6.96354 9.22396 9.22396C6.96354 11.4844 5.83333 14.2431 5.83333 17.5C5.83333 20.7569 6.96354 23.5156 9.22396 25.776C11.4844 28.0365 14.2431 29.1667 17.5 29.1667Z"
                        fill="black" fill-opacity="0.75" />
                </svg>
            </a>
            <a href="./help" class="menu-item item-active ">
                <svg xmlns="http://www.w3.org/2000/svg" width="7" height="40" fill="none">
                    <path d="M0 0L7 3V37L0 40V0Z" fill="#61439A" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="25" viewBox="0 0 32 25" fill="none">
                    <path d="M6.08317 24.3333V21.5H8.34984L11.1478 12.1854C11.3366 11.5715 11.6851 11.0814 12.1933 10.7149C12.7014 10.3485 13.2619 10.1657 13.8748 10.1667H18.1248C18.7387 10.1667 19.2997 10.3499 19.8078 10.7163C20.3159 11.0828 20.664 11.5725 20.8519 12.1854L23.6498 21.5H25.9165V24.3333H6.08317ZM11.3248 21.5H20.6748L18.1248 13H13.8748L11.3248 21.5ZM14.5832 7.33333V0.25H17.4165V7.33333H14.5832ZM23.0123 10.8396L20.9936 8.82083L26.0228 3.82708L28.0061 5.81042L23.0123 10.8396ZM24.4998 17.25V14.4167H31.5832V17.25H24.4998ZM8.98734 10.8396L3.99359 5.81042L5.97692 3.82708L11.0061 8.82083L8.98734 10.8396ZM0.416504 17.25V14.4167H7.49984V17.25H0.416504Z" fill="#61439A"/>
                  </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="22" fill="none">
                    <path d="M0.918632 11.0659L11.5252 21.6725L11.5252 0.459315L0.918632 11.0659Z" fill="#61439A" />
                </svg>
            </a>
            <a href="/" style="text-decoration: none; color: black; font-size: 1.2rem; border: 2px solid black ; padding: .5rem 1rem; border-radius: 10px;"> logout </a>
        </div>
        <div>
            <img class="munu-icon" src="../static/images/munu-icon.png" />
        </div>
    </div>

    <div class="main-section">

        <div class="dashboard-header">
           <h2>Map</h2> 
           <button class="addres-btn">
            <p>Your Current Address</p>
            <h3>Location: ({{lat}}, {{long}})</h3>
           </button>
          
        </div>
       
       <!-- <div class="sos" id="open-modal">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="35"  fill="none">
                <path d="M7.79183 29.1667V26.25H10.1252L13.0054 16.6615C13.1998 16.0295 13.5586 15.5249 14.0816 15.1477C14.6047 14.7705 15.1817 14.5824 15.8127 14.5833H20.1877C20.8196 14.5833 21.3971 14.7719 21.9202 15.1492C22.4432 15.5264 22.8015 16.0305 22.995 16.6615L25.8752 26.25H28.2085V29.1667H7.79183ZM16.5418 11.6667V4.375H19.4585V11.6667H16.5418ZM25.2189 15.276L23.1408 13.1979L28.3179 8.05729L30.3595 10.099L25.2189 15.276ZM26.7502 21.875V18.9583H34.0418V21.875H26.7502ZM10.7814 15.276L5.64079 10.099L7.68246 8.05729L12.8595 13.1979L10.7814 15.276ZM1.9585 21.875V18.9583H9.25016V21.875H1.9585Z" fill="white"/>
              </svg>
              <form id="helpForm" action="/help" method="POST">
                
                <button type="submit">SOS</button>
            </form>

        </div>

       </div> -->

       <div class="sos" id="open-modal" onclick="document.getElementById('helpForm').submit()">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="35" fill="none">
                <path d="M7.79183 29.1667V26.25H10.1252L13.0054 16.6615C13.1998 16.0295 13.5586 15.5249 14.0816 15.1477C14.6047 14.7705 15.1817 14.5824 15.8127 14.5833H20.1877C20.8196 14.5833 21.3971 14.7719 21.9202 15.1492C22.4432 15.5264 22.8015 16.0305 22.995 16.6615L25.8752 26.25H28.2085V29.1667H7.79183ZM16.5418 11.6667V4.375H19.4585V11.6667H16.5418ZM25.2189 15.276L23.1408 13.1979L28.3179 8.05729L30.3595 10.099L25.2189 15.276ZM26.7502 21.875V18.9583H34.0418V21.875H26.7502ZM10.7814 15.276L5.64079 10.099L7.68246 8.05729L12.8595 13.1979L10.7814 15.276ZM1.9585 21.875V18.9583H9.25016V21.875H1.9585Z" fill="white"/>
            </svg>
            SOS
            <form id="helpForm" action="/help" method="POST">
                <!-- You can add other form fields here if needed -->
            </form>
        </div>
      </div>
      

       <!-- <button class="cancel-btn">
        Cancel
       </button> -->

       <dialog   id="modal" class="modal-container" >
        <buuton  id="close-modal" >   <img  src="../static/images/close-btn.png" /></buuton>
         <div>
            <h2 style="font-size: 1.8rem;">Help is on the way!</h2>
           <p style="font-size: 1.2rem;">Notification sent to these contacts.</p>
         </div>
         <div id="emergency-contact-section" style="margin-top: 2rem; background-color: #E6BFFF; padding: 1rem;">
          <p style="font-size: 1.1rem;">{{emergency_contact_number}}</p>
          <p id="emergency-contact-number" style="font-size: 1.2rem;"></p>
      </div>
       
       </dialog>
    


    </div>

 <script>

   // Fetch JSON data from the Flask route
   document.getElementById('helpForm').addEventListener('submit', function (event) {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Make a POST request to the "/help" route
            fetch('/help', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Update the modal with the emergency contact number
                        const emergencyContactSection = document.getElementById('emergency-contact-section');
                        const emergencyContactNumber = document.getElementById('emergency-contact-number');

                        emergencyContactNumber.textContent = `Contact Number: ${data.emergency_contact_number}`;
                        emergencyContactSection.style.display = 'block'; // Show the section if needed
                    }
                })
                .catch(error => console.error('Error:', error));
        });

const Modal = document.getElementById("modal");
   const openModal = document.getElementById("open-modal");
   const closeModal = document.getElementById("close-modal");
   
   openModal.addEventListener("click" , ()=>{
    Modal.showModal();
   })

   closeModal.addEventListener("click" , ()=>{
    Modal.close();
   })

 </script>

</body>

</html>